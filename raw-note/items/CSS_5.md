## CSS 重構
### BOOK resource, CSS 

------------

第一章 - 重構與架構
第二章 - 了解串接
第三章 - 編寫較佳的 CSS
第四章 - 為不同類型的樣式分類
第五章 - 測試
第六章 - 樣式碼置放與重構策略

------------


### 第一章 - 重構與架構
  * 重構是為了更簡單與更容易重用 (reusable)

#### 好的軟體架構
  * 可預期 (predictable), 容易在可以預期的地方找到正確的程式碼。
  * 程式碼重用性高 (reusable), 不需要複製類似的程式碼。
  * 容易擴充 (extensibility), 新功能容易增加, 不需要修改其他程式碼。
  * 好維護 (maintainability), 因應需求的變化, 調整程式碼容易。

#### 重構的時機
  * 修正錯誤時
  * 建置新功能時
  * 在進行小任務時固定重構
  * 相依性小的時候重構
  * 專門執行的大型重構

#### Tips
  * 持續跟上最佳實務 (Best Practice)
  * 趁早訂好程式碼標準 (coding standards)，避免編碼風格的重構
  * 測試 (testing)


------------------------------


### 第二章 - 了解串接 (cascade)

#### CSS 選擇器的特定度 (specificity)
  * 特定度(specificity)
    1. `!important` > 
    1. 行內樣式 (inline) > 
    1. ID 數量 > 
    1. 類別/屬性/擬類別 數量 (class/attributes/pseudo-class) > 
    1. 元素類型/擬元素 數量 (type/pseudo-elements)
  * 特定度相等時，最晚出現的優先。
  * media query 不影響特定度。


------------------------------


### 第三章 - 編寫較佳的 CSS

#### 善用註解
  * 具有相依性時，與其他選擇器有直接相關的設定。
  * 針對不同瀏覽器的特殊行為

#### 撰寫風格一致
  * code style
  * linter

#### 單純的選擇器
  * 選擇器結構越簡單越好，盡可能簡單。
  * 降低與 HTML 結構的耦合
  * 善用 class 選擇器
  * 簡單的 CSS 結構，有更好的效能，也更容易重複使用和理解。

#### 切斷 CSS 與 JavaScript 的耦合
  * JavaScript 以調整 class 影響樣式。
  * JavaScript 專用的選擇器，加上名稱前綴 `js-`。

#### 類別有明確的命名
  * 命名的好才容易重用與維護。
  * 避免過度模組化，導致不易修改。除非特殊需求使用 Atomic CSS。

#### 善用 box-model


------------------------------


### 第四章 - 為不同類型的樣式分類

#### 樣式正規化 (normalizing)
  * 每個瀏覽器預設的樣式不同 (user agent stylesheet)
  * 使用 `normalize.css` 統一瀏覽器的預設行為

#### 基礎樣式設計
  * 針對不複雜的情境
  * 可以針對元素 (element type) 去指定基本的樣式
  * 設置基本的 `color`, `font-size`, `font-family`, `font-weight`, `padding`, `margin`, ...
  * 為 `a` 連結和擬類別 (pseudo-class) 設置基本樣式
  * 善用樣式的繼承 (inherit) 自動繼承與設置繼承

#### 瀏覽器特定樣式
  * 依據針對各個瀏覽器的專用樣式，可以額外放成另外一個 `.css` 配合 `<!--[if]><![endif]-->` 在需要時才載入。


------------------------------


### 第五章 - 測試

#### 決定要測試的瀏覽器, 作業系統, 螢幕寬度
  * 藉由瀏覽器市占率
  * 藉由 Google Analytics 追蹤瀏覽者資訊

#### 手動測試
  * 下載主流的各家瀏覽器與內建的開發者工具模擬
  * Andriod, iOS 可以下載專用的開發者工具模擬
  * 使用第三方測試服務 `Sauce Labs` ...

#### 視覺回歸測試 (visual regression testing)
  * 測試時間較長，只選擇測試重要的內容。
  * 一次不要測試太多的內容。
  * 針對不同的瀏覽器都有各自的回歸測試
  * 使用第三方工具 `Gemini`, `Wraith`, `PhantomCSS`


------------------------------


### 第六章 - 樣式碼置放與重構策略
  * 正確的順序合併 CSS 檔
  * Minify CSS 檔

#### 重構策略
  * 一次重構一小部分
  * 該重構的內容
    * 移除沒用到的樣式
    * 移除重複宣告的樣式
    * 切斷 CSS 與 JavaScript 的耦合，使用不同的選擇器。
  * 藉由 `CSS dig` 查詢，調整選擇器與樣式，善用繼承。
  * 降低選擇器的特定度
  * 分離針對特定瀏覽器的樣式修正